(()=>{var e={};e.id=818,e.ids=[818],e.modules={2289:(e,t,r)=>{Promise.resolve().then(r.bind(r,50062))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6211:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>d,Hj:()=>l,XI:()=>i,nA:()=>m,nd:()=>c});var s=r(60687),a=r(43210),n=r(4780);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));d.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=a.forwardRef(({className:e,...t},r)=>{let{key:a,...i}=t;return(0,s.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...i})});l.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14975:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},43559:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var s=r(37074);function a(e,t){return+(0,s.o)(e)==+(0,s.o)(t)}},44493:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>o});var s=r(60687),a=r(43210),n=r(4780);let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},50062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(main)/admin/live-attendance/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(main)/admin/live-attendance/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},56144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["(main)",{children:["admin",{children:["live-attendance",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,50062)),"/home/user/studio/src/app/(main)/admin/live-attendance/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,60448)),"/home/user/studio/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(main)/admin/live-attendance/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(main)/admin/live-attendance/page",pathname:"/admin/live-attendance",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},62270:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(60687),a=r(43210),n=r(87979),i=r(44493),o=r(6211),d=r(96834),l=r(32584),c=r(11516),m=r(82614);let u=(0,m.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var p=r(48206);let x=(0,m.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),h=(0,m.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var f=r(14975);let y=(0,m.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),v=(0,m.A)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var j=r(15036),b=r(58261),g=r(13091),N=r(82592),k=r(43559);function w(e){return(0,k.r)(e,(0,N.A)(e))}var A=r(73437),C=r(49568),q=r(15256);let M=({checkInTime:e})=>{let[t,r]=(0,a.useState)(0);if((0,a.useEffect)(()=>{try{let t=(0,b.H)(e),s=setInterval(()=>{r((0,g.b)(new Date,t))},1e3);return()=>clearInterval(s)}catch(e){return}},[e]),t<0)return(0,s.jsx)("span",{children:"-"});let n=Math.floor(t/36e5),i=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3);return(0,s.jsx)("span",{className:"font-mono",children:`${n}h ${i}m ${o}s`})};function P(){let{allUsers:e,attendanceLog:t,loading:r}=(0,n.A)(),[m,N]=(0,a.useState)(new Date),k=(0,a.useMemo)(()=>{if(r)return[];let s=e.filter(e=>"employee"===e.role||"manager"===e.role),a=new Date;return s.map(e=>{let r,s,n,i;let o=t.filter(t=>t.userId===e.id&&t.timestamp).sort((e,t)=>(0,b.H)(t.timestamp).getTime()-(0,b.H)(e.timestamp).getTime()),d=o[0],l=o.filter(e=>e.timestamp&&w((0,b.H)(e.timestamp))),c="Away",m=l.reduce((e,t)=>"Checked Out"===t.status&&void 0!==t.totalHours&&null!==t.totalHours?e+t.totalHours:e,0),u=0,p=l.find(e=>"check-in"===e.type&&"Checked In"===e.status);if(p&&p.timestamp){let e=(0,b.H)(p.timestamp);w(e)&&(u=(0,g.b)(a,e)/36e5,i=p.timestamp)}return m+=u,d&&(c="check-in"===d.type?"Checked In":"Checked Out",r=d.timestamp,s=d.isWithinGeofence,n=d.checkInLocation),{user:e,status:c,lastActivityTime:r,isWithinGeofence:s,location:n,liveCheckInTime:i,workingHoursToday:(0,q.a3)(36e5*m)}}).sort((e,t)=>(e.user.name||"").localeCompare(t.user.name||""))},[e,t,r,m]);return r?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full py-10",children:[(0,s.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Loading attendance data..."})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Live Employee Attendance"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Real-time overview of employee check-in/out status. This page updates automatically."})]})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:[(0,s.jsx)(u,{className:"mr-2 h-3 w-3 animate-spin",style:{animationDuration:"10s"}}),"Last updated: ",(0,A.GP)(m,"PPpp")]}),(0,s.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"mr-2 h-5 w-5 text-primary"}),"Employee Status"]}),(0,s.jsx)(i.BT,{children:"Current attendance status and activity for all employees and managers."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{children:"Employee"}),(0,s.jsx)(o.nd,{children:"Status"}),(0,s.jsx)(o.nd,{children:"Last Activity"}),(0,s.jsx)(o.nd,{children:"Geofence"}),(0,s.jsx)(o.nd,{children:"Live Session Duration"}),(0,s.jsx)(o.nd,{children:"Total Hours (Today)"})]})}),(0,s.jsxs)(o.BF,{children:[k.map(({user:e,status:t,lastActivityTime:r,isWithinGeofence:a,liveCheckInTime:n,workingHoursToday:i})=>(0,s.jsxs)(o.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(o.nA,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(l.eu,{className:"h-9 w-9 border",children:[(0,s.jsx)(l.BK,{src:e.profilePictureUrl||void 0,alt:e.name||"User"}),(0,s.jsx)(l.q5,{children:e.name?e.name.split(" ").map(e=>e[0]).join(""):"U"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:e.name||"N/A"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:e.employeeId})]})]})}),(0,s.jsx)(o.nA,{children:(0,s.jsxs)(d.E,{variant:"Checked In"===t?"default":"Checked Out"===t?"secondary":"outline",className:"capitalize",children:["Checked In"===t&&(0,s.jsx)(x,{className:"mr-1.5 h-3.5 w-3.5"}),"Checked Out"===t&&(0,s.jsx)(h,{className:"mr-1.5 h-3.5 w-3.5"}),"Away"===t&&(0,s.jsx)(f.A,{className:"mr-1.5 h-3.5 w-3.5"}),t]})}),(0,s.jsx)(o.nA,{className:"text-sm text-muted-foreground",children:r?(0,C.m)((0,b.H)(r),{addSuffix:!0}):"N/A"}),(0,s.jsx)(o.nA,{children:null==a?(0,s.jsx)(d.E,{variant:"outline",children:"N/A"}):a?(0,s.jsxs)(d.E,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[(0,s.jsx)(y,{className:"mr-1 h-3 w-3"})," Within"]}):(0,s.jsxs)(d.E,{variant:"destructive",children:[(0,s.jsx)(v,{className:"mr-1 h-3 w-3"})," Outside"]})}),(0,s.jsx)(o.nA,{children:"Checked In"===t&&n?(0,s.jsx)(M,{checkInTime:n}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,s.jsxs)(o.nA,{className:"font-medium",children:[(0,s.jsx)(j.A,{className:"inline-block mr-1.5 h-4 w-4 text-primary/80"}),i]})]},e.id)),0===k.length&&!r&&(0,s.jsx)(o.Hj,{children:(0,s.jsx)(o.nA,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No employee attendance data available for today."})})]})]})})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67441:(e,t,r)=>{Promise.resolve().then(r.bind(r,62270))},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96834:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var s=r(60687);r(43210);var a=r(24224),n=r(4780);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...r})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,178,658,814,595,906,953,449,208],()=>r(56144));module.exports=s})();