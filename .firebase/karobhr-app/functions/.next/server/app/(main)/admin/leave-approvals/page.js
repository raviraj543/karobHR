(()=>{var e={};e.id=334,e.ids=[334],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3662:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6211:(e,r,t)=>{"use strict";t.d(r,{A0:()=>l,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>p,nd:()=>c});var s=t(60687),a=t(43210),i=t(4780);let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...r})}));n.displayName="Table";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...r}));l.displayName="TableHeader";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...r}));d.displayName="TableBody",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let o=a.forwardRef(({className:e,...r},t)=>{let{key:a,...n}=r;return(0,s.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...n})});o.displayName="TableRow";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));c.displayName="TableHead";let p=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));p.displayName="TableCell",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29401:(e,r,t)=>{Promise.resolve().then(t.bind(t,99936))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},39050:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(main)/admin/leave-approvals/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(main)/admin/leave-approvals/page.tsx","default")},42432:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(r,d);let o={children:["",{children:["(main)",{children:["admin",{children:["leave-approvals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39050)),"/home/user/studio/src/app/(main)/admin/leave-approvals/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,60448)),"/home/user/studio/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(main)/admin/leave-approvals/page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(main)/admin/leave-approvals/page",pathname:"/admin/leave-approvals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},44493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l});var s=t(60687),a=t(43210),i=t(4780);let n=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66421:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]])},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92953:(e,r,t)=>{Promise.resolve().then(t.bind(t,39050))},94735:e=>{"use strict";e.exports=require("events")},97025:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},99936:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var s=t(60687),a=t(43210),i=t(87979),n=t(29523),l=t(44493),d=t(6211),o=t(29867),c=t(11516),p=t(66421),m=t(3662),u=t(97025),x=t(48206),h=t(85814),f=t.n(h);function v(){let{allUsers:e,processLeaveApplication:r,loading:t}=(0,i.A)(),{toast:h}=(0,o.dj)(),[v,j]=(0,a.useState)({}),b=(0,a.useMemo)(()=>t?[]:e.filter(e=>"employee"===e.role||"manager"===e.role).flatMap(e=>(e.leaves||[]).filter(e=>"pending"===e.status).map(r=>({...r,userName:e.name||e.employeeId,userDepartment:e.department,userProfilePictureUrl:e.profilePictureUrl}))).sort((e,r)=>new Date(e.appliedAt).getTime()-new Date(r.appliedAt).getTime()),[e,t]),y=async(e,t,s)=>{j(e=>({...e,[t]:!0}));try{await r(e,t,s),h({title:`Leave Application ${"approved"===s?"Approved":"Rejected"}`,description:`The leave request has been successfully ${s}.`})}catch(e){h({title:"Error Processing Leave",description:e.message||"Could not process the leave request.",variant:"destructive"})}finally{j(e=>({...e,[t]:!1}))}};return t?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full py-10",children:[(0,s.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Loading leave requests..."})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Leave Approvals"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Review and process pending leave requests from employees."})]})}),(0,s.jsxs)(l.Zp,{className:"shadow-sm",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"mr-2 h-5 w-5 text-primary"}),"Pending Leave Requests"]}),(0,s.jsx)(l.BT,{children:"Approve or reject leave applications submitted by employees and managers."})]}),(0,s.jsx)(l.Wu,{children:b.length>0?(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Employee"}),(0,s.jsx)(d.nd,{className:"hidden md:table-cell",children:"Department"}),(0,s.jsx)(d.nd,{children:"Leave Type"}),(0,s.jsx)(d.nd,{children:"Dates"}),(0,s.jsx)(d.nd,{className:"hidden lg:table-cell",children:"Reason"}),(0,s.jsx)(d.nd,{children:"Applied On"}),(0,s.jsx)(d.nd,{children:"Actions"})]})}),(0,s.jsx)(d.BF,{children:b.map(e=>(0,s.jsxs)(d.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,s.jsx)(d.nA,{children:(0,s.jsx)(f(),{href:`/admin/employees/${e.employeeId}`,className:"font-medium hover:text-primary transition-colors",children:e.userName})}),(0,s.jsx)(d.nA,{className:"hidden md:table-cell text-muted-foreground",children:e.userDepartment||"N/A"}),(0,s.jsx)(d.nA,{children:e.leaveType}),(0,s.jsxs)(d.nA,{className:"text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,s.jsx)(d.nA,{className:"hidden lg:table-cell text-xs text-muted-foreground max-w-xs truncate",title:e.reason,children:e.reason}),(0,s.jsx)(d.nA,{className:"text-xs text-muted-foreground",children:new Date(e.appliedAt).toLocaleDateString()}),(0,s.jsxs)(d.nA,{className:"space-x-2 whitespace-nowrap",children:[(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>y(e.userId,e.id,"approved"),disabled:v[e.id],className:"text-green-600 border-green-600 hover:bg-green-50 hover:text-green-700",children:[v[e.id]&&(0,s.jsx)(c.A,{className:"mr-1 h-3 w-3 animate-spin"}),(0,s.jsx)(m.A,{className:"mr-1 h-3.5 w-3.5"})," Approve"]}),(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>y(e.userId,e.id,"rejected"),disabled:v[e.id],className:"text-red-600 border-red-600 hover:bg-red-50 hover:text-red-700",children:[v[e.id]&&(0,s.jsx)(c.A,{className:"mr-1 h-3 w-3 animate-spin"}),(0,s.jsx)(u.A,{className:"mr-1 h-3.5 w-3.5"})," Reject"]})]})]},e.id))})]}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(m.A,{className:"mx-auto h-12 w-12 text-green-500 mb-3"}),"No pending leave requests at this time. Great!"]})})]}),(0,s.jsxs)(l.Zp,{className:"shadow-sm mt-8",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center",children:[(0,s.jsx)(x.A,{className:"mr-2 h-5 w-5 text-primary"}),"Leave History (All Employees)"]}),(0,s.jsx)(l.BT,{children:"View all processed leave applications. (Feature pending full implementation)"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"A comprehensive table of all approved and rejected leaves will be shown here."})})]})]})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,178,658,814,595,449,208],()=>t(42432));module.exports=s})();