(()=>{var e={};e.id=825,e.ids=[825],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6211:(e,r,t)=>{"use strict";t.d(r,{A0:()=>i,BF:()=>d,Hj:()=>l,XI:()=>o,nA:()=>u,nd:()=>c});var s=t(60687),a=t(43210),n=t(4780);let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",e),...r})}));o.displayName="Table";let i=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",e),...r}));i.displayName="TableHeader";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...r}));d.displayName="TableBody",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let l=a.forwardRef(({className:e,...r},t)=>{let{key:a,...o}=r;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...o})});l.displayName="TableRow";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));u.displayName="TableCell",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31073:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(main)/payroll/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(main)/payroll/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,r,t)=>{"use strict";t.d(r,{T:()=>o});var s=t(60687),a=t(43210),n=t(4780);let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));o.displayName="Textarea"},37366:e=>{"use strict";e.exports=require("dns")},44493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>l,Wu:()=>c,ZB:()=>d,Zp:()=>o,aR:()=>i});var s=t(60687),a=t(43210),n=t(4780);let o=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));o.displayName="Card";let i=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},44610:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},55511:e=>{"use strict";e.exports=require("crypto")},59696:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=t(65239),a=t(48088),n=t(88170),o=t.n(n),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l={children:["",{children:["(main)",{children:["payroll",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,31073)),"/home/user/studio/src/app/(main)/payroll/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,60448)),"/home/user/studio/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/(main)/payroll/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(main)/payroll/page",pathname:"/payroll",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},60731:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(60687),a=t(43210),n=t(87979),o=t(29523),i=t(44493),d=t(89667),l=t(34729),c=t(80013),u=t(6211),m=t(96834),x=t(29867),p=t(29596);let f=(0,t(82614).A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var h=t(9023),v=t(11516),b=t(85866),g=t(44610),y=t(27605),j=t(63442),N=t(9275);let w=N.Ik({amount:N.vk(e=>Number(String(e).trim()),N.ai({invalid_type_error:"Amount must be a number."}).positive({message:"Amount must be positive."})),reason:N.Yj().min(10,{message:"Reason must be at least 10 characters."}).max(200,{message:"Reason cannot exceed 200 characters."})});function A(){let{user:e,requestAdvance:r,loading:t}=(0,n.A)(),[N,A]=(0,a.useState)(!1),{toast:k}=(0,x.dj)(),q=(0,y.mN)({resolver:(0,j.u)(w),defaultValues:{amount:void 0,reason:""}}),R=e?.baseSalary||0,S=e?.mockAttendanceFactor!==void 0?e.mockAttendanceFactor:1,P=R*S,T=e?.advances?.filter(e=>"approved"===e.status).reduce((e,r)=>e+r.amount,0)||0,_=P-T,C=async t=>{if(e){A(!0);try{await r(e.employeeId,t.amount,t.reason),k({title:"Advance Requested",description:"Your advance request has been submitted for approval."}),q.reset()}catch(e){k({title:"Error Requesting Advance",description:e.message||"Could not submit your advance request.",variant:"destructive"})}finally{A(!1)}}},M=e=>{switch(e){case"approved":return"default";case"pending":return"secondary";case"rejected":return"destructive";default:return"outline"}};return t||!e?(0,s.jsx)("div",{className:"text-center py-10",children:"Loading your payslip data..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"My Payslip & Advances"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"View your salary details and manage advance requests."})]})}),(0,s.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center",children:[(0,s.jsx)(p.A,{className:"mr-2 h-5 w-5 text-primary"}),"Payslip Summary (Mock)"]}),(0,s.jsxs)(i.BT,{children:["Your current salary breakdown.",(0,s.jsx)("span",{className:"block text-xs text-muted-foreground/80 italic mt-1",children:"Note: This is a simplified mock. Salary is calculated as (Base Salary * Mock Attendance Factor) - Approved Advances."})]})]}),(0,s.jsx)(i.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg border shadow-inner",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{className:"text-sm text-muted-foreground",children:"Base Monthly Salary"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-foreground",children:["₹",R.toLocaleString("en-IN")]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.J,{className:"text-sm text-muted-foreground flex items-center",children:[(0,s.jsx)(f,{className:"inline-block mr-1 h-3 w-3"})," Mock Attendance Factor"]}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-foreground",children:[(100*S).toFixed(0),"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{className:"text-sm text-muted-foreground",children:"Salary After Attendance (Mock)"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-foreground",children:["₹",P.toLocaleString("en-IN")]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-primary/5 rounded-lg border border-primary/20 shadow-inner",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{className:"text-sm text-muted-foreground",children:"Approved Advances (Deductions)"}),(0,s.jsxs)("p",{className:"text-2xl font-semibold text-destructive",children:["(₹",T.toLocaleString("en-IN"),")"]})]}),(0,s.jsxs)("div",{className:"pt-2",children:[(0,s.jsx)(c.J,{className:"text-sm text-primary/80",children:"Net Payable Amount"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-primary",children:["₹",_.toLocaleString("en-IN")]})]})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center",children:[(0,s.jsx)(h.A,{className:"mr-2 h-5 w-5 text-primary"}),"Request Salary Advance"]}),(0,s.jsx)(i.BT,{children:"Need an advance? Fill out the form below."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("form",{onSubmit:q.handleSubmit(C),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{htmlFor:"amount",children:"Amount Requested (₹)"}),(0,s.jsx)(d.p,{id:"amount",type:"number",placeholder:"e.g., 5000",...q.register("amount"),className:q.formState.errors.amount?"border-destructive focus-visible:ring-destructive":""}),q.formState.errors.amount&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.amount.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.J,{htmlFor:"reason",children:"Reason for Advance"}),(0,s.jsx)(l.T,{id:"reason",placeholder:"Briefly explain the reason for your request (min. 10 characters)",rows:3,...q.register("reason"),className:q.formState.errors.reason?"border-destructive focus-visible:ring-destructive":""}),q.formState.errors.reason&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.reason.message})]}),(0,s.jsxs)(o.$,{type:"submit",disabled:N||t,className:"w-full sm:w-auto",children:[N?(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Submit Advance Request"]})]})})]}),(0,s.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsxs)(i.ZB,{className:"flex items-center",children:[(0,s.jsx)(g.A,{className:"mr-2 h-5 w-5 text-primary"}),"My Advance History"]}),(0,s.jsx)(i.BT,{children:"Track the status of your advance requests."})]}),(0,s.jsx)(i.Wu,{children:e.advances&&e.advances.length>0?(0,s.jsxs)(u.XI,{children:[(0,s.jsx)(u.A0,{children:(0,s.jsxs)(u.Hj,{children:[(0,s.jsx)(u.nd,{children:"Amount (₹)"}),(0,s.jsx)(u.nd,{children:"Date Requested"}),(0,s.jsx)(u.nd,{children:"Status"}),(0,s.jsx)(u.nd,{className:"hidden sm:table-cell",children:"Reason"})]})}),(0,s.jsx)(u.BF,{children:e.advances.slice().reverse().map(e=>(0,s.jsxs)(u.Hj,{className:"hover:bg-muted/50 transition-colors",children:[(0,s.jsxs)(u.nA,{className:"font-medium",children:["₹",e.amount.toLocaleString("en-IN")]}),(0,s.jsx)(u.nA,{className:"text-muted-foreground",children:new Date(e.dateRequested).toLocaleDateString()}),(0,s.jsx)(u.nA,{children:(0,s.jsx)(m.E,{variant:M(e.status),className:"capitalize",children:e.status})}),(0,s.jsx)(u.nA,{className:"hidden sm:table-cell text-xs text-muted-foreground truncate max-w-[150px]",title:e.reason,children:e.reason})]},e.id))})]}):(0,s.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"You have not made any advance requests."})})]})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},80013:(e,r,t)=>{"use strict";t.d(r,{J:()=>l});var s=t(60687),a=t(43210),n=t(78148),o=t(24224),i=t(4780);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(d(),e),...r}));l.displayName=n.b.displayName},81630:e=>{"use strict";e.exports=require("http")},85692:(e,r,t)=>{Promise.resolve().then(t.bind(t,60731))},85866:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(82614).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},89667:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(60687),a=t(43210),n=t(4780);let o=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,suppressHydrationWarning:!0,...t}));o.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96834:(e,r,t)=>{"use strict";t.d(r,{E:()=>i});var s=t(60687);t(43210);var a=t(24224),n=t(4780);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:r}),e),...t})}},99260:(e,r,t)=>{Promise.resolve().then(t.bind(t,31073))}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,178,658,814,595,206,449,208],()=>t(59696));module.exports=s})();