(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var n=s(5155),r=s(2115),a=s(9708),o=s(2085),i=s(9434);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:o,asChild:d=!1,...c}=e,m=d?a.DX:"button";return(0,n.jsx)(m,{className:(0,i.cn)(l({variant:r,size:o,className:s})),ref:t,suppressHydrationWarning:!0,...c})});d.displayName="Button"},1230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var n=s(5155),r=s(2115),a=s(6695),o=s(285),i=s(2523),l=s(8539),d=s(5057),c=s(286),m=s(8224),u=s(960),h=s(207),f=s(8271),x=s(5263),p=s(7120),g=s(3672),v=s(6874),b=s.n(v),j=s(6681),y=s(7481),N=s(6424);let A=[{title:"Total Employees",value:"75",icon:c.A,link:"/admin/employees"},{title:"Pending Leave Approvals",value:"5",icon:m.A,link:"/admin/leave-approvals"},{title:"Tasks In Progress",value:"23",icon:u.A,link:"/admin/tasks"},{title:"System Health",value:"Optimal",icon:h.A,color:"text-green-500"}];function w(){let{allUsers:e,announcements:t,addAnnouncement:s,user:c}=(0,j.A)(),{toast:m}=(0,y.dj)(),[u,h]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[R,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{document.title="Admin Dashboard - KarobHR"},[]);let k=e.filter(e=>"employee"===e.role||"manager"===e.role).length;A[0].value=k.toString();let S=async e=>{if(e.preventDefault(),console.log(">>> KAROBHR TRACE: AdminDashboardPage - handlePostAnnouncement triggered."),!c||"admin"!==c.role){console.error(">>> KAROBHR TRACE: AdminDashboardPage - User is not an admin or not logged in. Cannot post announcement."),m({title:"Permission Denied",description:"You do not have permission to post announcements.",variant:"destructive"});return}if(!u.trim()||!v.trim()){console.log(">>> KAROBHR TRACE: AdminDashboardPage - Announcement title or content is empty."),m({title:"Missing Information",description:"Please provide both a title and content for the announcement.",variant:"destructive"});return}console.log(">>> KAROBHR TRACE: AdminDashboardPage - Setting isPostingAnnouncement to true."),T(!0);try{console.log('>>> KAROBHR TRACE: AdminDashboardPage - Calling addAnnouncement from context with title: "'.concat(u,'"')),await s(u,v),console.log(">>> KAROBHR TRACE: AdminDashboardPage - addAnnouncement call successful."),m({title:"Announcement Posted!",description:"Your announcement is now visible to all employees."}),h(""),w("")}catch(e){console.error(">>> KAROBHR TRACE: AdminDashboardPage - Error in handlePostAnnouncement:",e),m({title:"Error Posting Announcement",description:e.message||"Could not post the announcement.",variant:"destructive"})}finally{console.log(">>> KAROBHR TRACE: AdminDashboardPage - Setting isPostingAnnouncement to false."),T(!1)}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Admin Dashboard"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Overview of company operations and quick actions."})]}),(0,n.jsx)(b(),{href:"/admin/settings",passHref:!0,children:(0,n.jsxs)(o.$,{variant:"outline",children:[(0,n.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Company Settings"]})})]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:A.map(e=>(0,n.jsxs)(a.Zp,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,n.jsxs)(a.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(a.ZB,{className:"text-sm font-medium",children:e.title}),(0,n.jsx)(e.icon,{className:"h-5 w-5 text-muted-foreground ".concat(e.color||"")})]}),(0,n.jsxs)(a.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:e.value}),e.link?(0,n.jsx)(b(),{href:e.link,className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Manage â†’"}):(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"\xa0"})]})]},e.title))}),(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,n.jsxs)(a.Zp,{className:"shadow-sm",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsx)(a.ZB,{children:"Recent Employee Activity"}),(0,n.jsx)(a.BT,{children:"Overview of recent check-ins, task updates, and leave requests."})]}),(0,n.jsxs)(a.Wu,{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Employee activity data will be shown here."}),(0,n.jsx)("div",{className:"mt-4 h-64 bg-muted rounded-md flex items-center justify-center border","data-ai-hint":"bar chart employee activity",children:(0,n.jsx)(x.A,{className:"h-16 w-16 text-muted-foreground/50"})})]})]}),(0,n.jsxs)(a.Zp,{className:"shadow-sm",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsx)(a.ZB,{children:"Quick Links"}),(0,n.jsx)(a.BT,{children:"Access common admin tasks quickly."})]}),(0,n.jsxs)(a.Wu,{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(o.$,{variant:"outline",asChild:!0,children:(0,n.jsx)(b(),{href:"/admin/employees/new",children:"Add New Employee"})}),(0,n.jsx)(o.$,{variant:"outline",asChild:!0,children:(0,n.jsx)(b(),{href:"/admin/tasks",children:"Assign New Task"})}),(0,n.jsx)(o.$,{variant:"outline",asChild:!0,children:(0,n.jsx)(b(),{href:"/admin/holidays",children:"Manage Holidays"})}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground col-span-2",children:"Report generation coming soon."})]})]})]}),(0,n.jsxs)(a.Zp,{className:"shadow-sm",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsxs)(a.ZB,{className:"flex items-center",children:[(0,n.jsx)(p.A,{className:"mr-2 h-5 w-5 text-primary"}),"Post Company Announcement"]}),(0,n.jsx)(a.BT,{children:"Share important updates with all employees."})]}),(0,n.jsx)(a.Wu,{children:(0,n.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"announcementTitle",children:"Title"}),(0,n.jsx)(i.p,{id:"announcementTitle",value:u,onChange:e=>h(e.target.value),placeholder:"e.g., Upcoming Holiday Schedule",disabled:R})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{htmlFor:"announcementContent",children:"Content"}),(0,n.jsx)(l.T,{id:"announcementContent",value:v,onChange:e=>w(e.target.value),placeholder:"Enter the details of your announcement here...",rows:4,disabled:R})]}),(0,n.jsx)(o.$,{type:"submit",disabled:R||!c||"admin"!==c.role,children:R?"Posting...":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Post Announcement"]})})]})})]}),(0,n.jsxs)(a.Zp,{className:"shadow-sm",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsx)(a.ZB,{children:"Recent Announcements"}),(0,n.jsx)(a.BT,{children:"A log of announcements you've posted."})]}),(0,n.jsx)(a.Wu,{children:t&&t.length>0?(0,n.jsx)(N.F,{className:"h-72 border rounded-md p-4 bg-background",children:(0,n.jsx)("ul",{className:"space-y-4",children:t.map(e=>(0,n.jsxs)("li",{className:"p-4 border rounded-md bg-muted/50 shadow-sm",children:[(0,n.jsx)("h4",{className:"font-semibold text-foreground",children:e.title}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Posted by ",e.postedByName," on ",new Date(e.postedAt).toLocaleDateString()," at ",new Date(e.postedAt).toLocaleTimeString()]}),(0,n.jsx)("p",{className:"mt-1 text-sm text-foreground whitespace-pre-wrap",children:e.content})]},e.id))})}):(0,n.jsx)("p",{className:"text-muted-foreground",children:"No announcements posted yet."})})]}),(0,n.jsxs)(a.Zp,{className:"shadow-sm",children:[(0,n.jsxs)(a.aR,{children:[(0,n.jsx)(a.ZB,{children:"Task Completion Overview"}),(0,n.jsx)(a.BT,{children:"Summary of task statuses across the organization."})]}),(0,n.jsxs)(a.Wu,{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Task overview data will be shown here."}),(0,n.jsx)("div",{className:"mt-4 h-64 bg-muted rounded-md flex items-center justify-center border","data-ai-hint":"pie chart task status",children:(0,n.jsx)(x.A,{className:"h-16 w-16 text-muted-foreground/50"})})]})]})]})}},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var n=s(5155),r=s(2115),a=s(9434);let o=r.forwardRef((e,t)=>{let{className:s,type:r,...o}=e;return(0,n.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,suppressHydrationWarning:!0,...o})});o.displayName="Input"},3705:(e,t,s)=>{Promise.resolve().then(s.bind(s,1230))},5057:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var n=s(5155),r=s(2115),a=s(968),o=s(2085),i=s(9434);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(a.b,{ref:t,className:(0,i.cn)(l(),s),...r})});d.displayName=a.b.displayName},6424:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var n=s(5155),r=s(2115),a=s(7655),o=s(9434);let i=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,n.jsxs)(a.bL,{ref:t,className:(0,o.cn)("relative overflow-hidden",s),...i,children:[(0,n.jsx)(a.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,n.jsx)(l,{}),(0,n.jsx)(a.OK,{})]})});i.displayName=a.bL.displayName;let l=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...i}=e;return(0,n.jsx)(a.VM,{ref:t,orientation:r,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:(0,n.jsx)(a.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=a.VM.displayName},6681:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(2115),r=s(8232);let a=()=>{let e=(0,n.useContext)(r.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>i});var n=s(5155),r=s(2115),a=s(9434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});l.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var n=s(2115);let r=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=n.useState(d);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8539:(e,t,s)=>{"use strict";s.d(t,{T:()=>o});var n=s(5155),r=s(2115),a=s(9434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});o.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,4277,4644,3874,7655,8107,7275,8441,1684,7358],()=>t(3705)),_N_E=e.O()}]);